[
    {
        "question": "Theo quy trình cấp Chứng nhận trường mầm non đạt kiểm định chất lượng giáo dục, thành phần hồ sơ bắt buộc gồm những tài liệu nào?",
        "right_answer": "B",
        "model_output": "Answer: C",
        "extracted_output": "C",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Ngôi chùa Ba La Mật được khai dựng vào năm nào?",
        "right_answer": "A",
        "model_output": "Answer: C",
        "extracted_output": "C",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Cuộc thi người mẫu nào tổ chức quy mô toàn quốc phải có giấy phép của ai?",
        "right_answer": "A",
        "model_output": "Answer: B",
        "extracted_output": "B",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Giải pháp nào sau đây được đề xuất để xử lý lỗi xác thực khi nộp hồ sơ thẩm duyệt thiết kế về phòng cháy và chữa cháy?",
        "right_answer": "B",
        "model_output": "Answer: D",
        "extracted_output": "D",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Theo thông tin được cung cấp, tỉnh nào sau đây đã được sáp nhập vào tỉnh Gia Lai để hình thành tỉnh Gia Lai hiện tại?",
        "right_answer": "A",
        "model_output": "Answer: C",
        "extracted_output": "C",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Điều gì xảy ra khi tiết kiệm thực tế khác với tiết kiệm theo kế hoạch?",
        "right_answer": "C",
        "model_output": "Answer: B",
        "extracted_output": "B",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Nghệ thuật trong đoạn 1 bài 'Tinh thần yêu nước của nhân dân ta' là gì?",
        "right_answer": "B",
        "model_output": "Answer: A",
        "extracted_output": "A",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Đoạn thông tin:\n[1] Tiêu đề: Cuba\nNội dung: II. Chính trị\n2. Liên đoàn thương mại\n\nCó các liên đoàn kinh tế tại Cuba, với số thành viên lên tới 98% nhân lực hòn đảo này. Các liên đoàn không đăng ký với bất kỳ một cơ quan nhà nước nào, và tự lấy kinh phí hoạt động từ nguồn đóng góp thành viên hàng tháng. Những người ủng hộ họ cho rằng các viên chức liên đoàn được bầu lên trên cơ sở tự do, và có nhiều quan điểm chính trị bên trong mỗi liên đoàn. Tuy nhiên, tất cả các liên đoàn đều là một phần của một tổ chức được gọi là Confederación de Trabajadores Cubanos (Hiệp hội Công nhân Cuba, CTC), hội này thực sự có những mối quan hệ mật thiết với nhà nước và Đảng Cộng sản. Những người ủng hộ cho rằng CTC cho phép công nhân chuyển ý kiến lên chính phủ; những người đối lập lại cho rằng chính phủ sử dụng nó để kiểm soát các công đoàn thương mại và chỉ định các thành viên lãnh đạo công đoàn. Quyền tự do bày tỏ ý kiến của công nhân cũng là một vấn đề được tranh luận. Những người ủng hộ hệ thống cho rằng những ý kiến của công nhân trên thực tế đã hình thành nên chính sách của chính phủ trong nhiều hoàn cảnh, như đề xuất cải cách thuế năm 1993, trong khi phe đối lập, đưa ra những nghiên cứu của các tổ chức lao động quốc tế cho thấy công nhân bị buộc phải thề nguyền trung thành với các lý tưởng của Đảng Cộng sản, và cho rằng chính phủ chi phối một cách có hệ thống và cản trở các nhà hoạt động công đoàn, trong khi vẫn ngăn cấm việc thành lập các liên đoàn thương mại độc lập (không thuộc CTC), rằng các lãnh đạo các liên đoàn độc lập đã bị bỏ tù, và rằng quyền đình công của công nhân không được ghi nhận trong luật.\n\n3. Quan hệ đối ngoại\n\n3.1. Việt Nam\n\nQuan hệ ngoại giao giữa hai nước vô cùng đặc biệt. Ngày 12 tháng 9 năm 1973, Fidel Castro là vị nguyên thủ nước ngoài đầu tiên và duy nhất thăm vùng giải phóng miền Nam khi chiến tranh chưa kết thúc. Cũng trong chuyến thăm lần đầu tiên này, Cuba đã tặng Việt Nam 5 công trình kinh tế - xã hội với tổng trị giá khoảng 80 triệu USD bao gồm: khách sạn Thắng Lợi (Hồ Tây, Hà Nội), Bệnh viện Việt Nam - Cuba (Đồng Hới, Quảng Bình), đường Xuân Mai, trại bò giống Ba Vì, Xí nghiệp gà Lương Mỹ; tặng bò giống, gà giống và chi hơn 6 triệu USD để mua thiết bị hiện đại, đồng thời cử chuyên gia về cầu đường sang Việt Nam tham gia cùng bộ đội Trường Sơn mở rộng Đường Trường Sơn, và giúp đào tạo trên 1.000 sinh viên Việt Nam ở trình độ đại học và cao học...Cuba là nước Mỹ Latinh đầu tiên và cũng là một trong những nước sớm nhất trên thế giới công nhận chính thức Mặt trận Dân tộc Giải phóng miền Nam Việt Nam. Cơ quan đại diện thường trú của Mặt trận Dân tộc Giải phóng miền Nam Việt Nam tại La Habana (Ban đầu tòa đại sứ này đặt tạm tại một biệt thự ở khu phố lao động Kohly, nhưng sau được Chính phủ Cuba cấp thêm một biệt thự sân vườn rất lớn tại Quinta Avenida, đại lộ số 5 dài nhất và đẹp nhất thủ đô La Habana) được hưởng đầy đủ quy chế ngoại giao. Sau khi Chính phủ Cách mạng lâm thời Cộng hòa Miền Nam Việt Nam thành lập, cơ quan này nhanh chóng được chuyển thành đại sứ quán miền Nam Việt Nam. Thời chiến khốc liệt, thông cảm hoàn cảnh khó khăn của nước bạn, Thủ tướng Fidel Castro bao cấp toàn phần. Tất cả từ nhà cửa, xe cộ, trang thiết bị làm việc, ăn ở, chi phí ngoại giao, kể cả lương bổng, phụ cấp của cán bộ, nhân viên sứ quán đều được Cuba bảo đảm chu đáo.Sau Sự kiện 30 tháng 4 năm 1975, hầu hết các nước đều dừng viện trợ không hoàn lại cho Việt Nam, riêng Cuba là một trong số ít các nước tiếp tục viện trợ cho Việt Nam 10 năm tiếp theo từ 1975-1985.\n\n3.2. Mỹ\n\nNgày 17 tháng 12 năm 2014, qua vai trò trung gian của Tòa Thánh Vatican, Chủ tịch Cuba Raul Castro và Tổng thống Hoa Kỳ Barack Obama tuyên bố đã đạt được một thỏa thuận về việc bình thường hóa quan hệ ngoại giao giữa hai nước sau hơn 50 năm gián đoạn. Tuy nhiên, việc bình thường hóa quan hệ còn phải trải qua một giai đoạn dài phía trước vì nó phải nhận được sự phê chuẩn từ lưỡng viện Quốc hội Hoa Kỳ. Tuy nhiên, tổng thống kế nhiệm ông Obama là Donald Trump vào năm 2016 đã hủy bỏ chính sách thân thiện của người tiền nhiệm, và tiếp tục duy trì cấm vận đối với Cuba.\n\nIII. Phân chia hành chính\n\nCuba có ba cấp hành chính là trung ương, tỉnh (provincias) và hạt (municipios). Cấp tỉnh có 14 đơn vị, cấp hạt có 169 đơn vị. Có một hạt đặc biệt, được xếp ngang với cấp tỉnh, đó là Isla de la Juventud. Trước kia Cuba chỉ có sáu tỉnh: Pinar del Río, Habana, Matanzas, Las Villas, Camagüey và Oriente. Cách phân chia hành chính hiện nay rất giống với kiểu tỉnh quân sự Tây Ban Nha trong những cuộc chiến tranh giành độc lập của Cuba, khi hầu hết những vùng có nhiều rắc rối đều được chia nhỏ.\n\nIV. Địa lý\n\nCuba là một quần đảo nằm tại Biển Caribbean, với tọa độ địa lý 21°3N, 80°00W. Cuba là hòn đảo chính, được bao quanh bởi bốn nhóm đảo lớn. Chúng gồm Colorados, Camagüey, Jardines de la Reina và Canarreos. Hòn đảo chính Cuba chiếm hầu hết diện tích đất nước (105.006 km² hay 40.543 dặm vuông) và là hòn đảo lớn thứ 17 trên thế giới theo diện tích. Hòn đảo lớn thứ hai tại Cuba là Đảo Thanh niên (Isla de la Juventud), tên cũ là Đảo Thông (Isla de la Pinos) ở phía đông nam, với diện tích 3056 km² (1180 dặm vuông). Cuba có tổng diện tích đất liền 110.860 km².\nHòn đảo chính gồm chủ yếu các đồng bằng phẳng tới hơi dốc. Ở cực phía đông nam Sierra Maestra, một rặng núi dốc đứng với điểm cao nhất là Pico Real del Turquino 2.005 mét (6.578 ft). Khí hậu địa phương là nhiệt đới, dù được điều tiết ôn hòa bởi gió mậu dịch. Nói chúng (với biến thiên theo địa phương), có một mùa khô từ tháng 11 tới tháng 4, và một mùa mưa từ tháng 5 tới tháng 10. Nhiệt độ trung bình 21 °C vào tháng 1 và 27 °C vào tháng 7. Cuba nằm trên đường đi của các cơn bão và chúng thường xảy ra nhất trong khoảng từ tháng 9 tới tháng 10. La Habana là thành phố lớn nhất và thủ đô Cuba; các thành phố lớn khác gồm Santiago de Cuba và Camagüey. Những thị trấn khác gồm Baracoa từng là khu định cư đầu tiên của người Tây Ban Nha tại Cuba, Trinidad, và một di sản thế giới của UNESCO, and Bayamo.\n\nV. Xã hội\n1. Giáo dục\n\nVề lịch sử, Cuba luôn có tỷ lệ giáo dục và biết chữ cao nhất Mỹ Latinh, cả trước và sau thời kỳ cách mạng. Giáo dục là miễn phí đối với mọi công dân Cuba gồm cả giáo dục đại học. Các định chế giáo dục tư nhân không được phép hoạt động. Phổ cập giáo dục áp dụng với mọi đứa trẻ từ sáu tuổi tới hết mức giáo dục cấp hai căn bản (thường là 15 tuổi) và tất cả học sinh, không cần biết giới tính và sắc tộc, đều mặc đồng phục của trường với màu sắc thể hiện cấp học. Trong suốt quá trình học, học sinh không phải trả một khoản phí nào, từ tiền may đồng phục, tiền mua sắm sách vở, giấy bút và còn được nuôi ăn một bữa hoặc cả ngày (tùy theo từng trường). Do vậy, gần như không có một trẻ em Cuba nào bị thất học, dù đó là ở nơi nông thôn xa xôi.\nGiáo dục tiểu học kéo dài sáu năm, giáo dục trung học cơ sở được chia thành mức căn bản và tiền đại học. Giáo dục cao học được tiến hành tại các trường đại học, các viện, các viện sư phạm và các viện bách khoa. Đại học La Habana được thành lập năm 1728 và có một số trường cao đẳng cũng như đại học khác. Bộ Giáo dục Cao học Cuba cũng điều hành chương trình Giáo dục Từ xa mở các lớp buổi chiều và buổi tối tại các vùng nông thôn cho các lao động nông nghiệp. Giáo dục được đề cao cả về mặt chính trị và ý thức hệ, và sinh viên bậc cao học được chờ đợi sẽ là người thực hiện các mục tiêu do chính phủ Cuba đề ra.\nCâu hỏi: Theo ngữ cảnh, nhận định nào sau đây chính xác về vai trò của Confederación de Trabajadores Cubanos (CTC) trong chính trị Cuba?",
        "right_answer": "B",
        "model_output": "Answer: A",
        "extracted_output": "A",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Giả sử $ T: \\mathbb{R}^3 \\to \\mathbb{R}^3 $ là một toán tử tuyến tính được biểu diễn bởi ma trận\n$$= \\begin{pmatrix}& 1 & 0 \\\\& 2 & 1 \\\\& 0 & 2. Câu nào sau đây là đúng về các giá trị riêng của $ T $?",
        "right_answer": "B",
        "model_output": "Answer: G",
        "extracted_output": "G",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    },
    {
        "question": "Đoạn thông tin:\n[1] Tiêu đề: Ném đá\nNội dung: Thạch hình là một phương pháp tử hình trong đó một nhóm người ném đá vào người cho đến khi đối tượng chết vì chấn thương cùn. Nó đã được chứng thực như một hình thức trừng phạt cho những hành vi sai trái nghiêm trọng từ thời cổ đại. Việc áp dụng nó trong một số hệ thống pháp lý đã gây ra tranh cãi trong những thập kỷ gần đây.\nTorah và Talmud quy định ném đá là hình phạt cho một số hành vi phạm tội. Trong nhiều thế kỷ, Do Thái giáo Rabbinic đã phát triển một số hạn chế về thủ tục khiến cho các luật này thực tế không thể thực thi được. Mặc dù ném đá không được đề cập trong Kinh Qur'an, luật học Hồi giáo cổ điển (fiqh) đã áp đặt ném đá như một hình phạt hadd (mô tả trong sharia) đối với một số hình thức zina (giao hợp bất hợp pháp) trên cơ sở của hadith (những lời nói và hành động được gán cho nhà tiên tri Hồi giáo Muhammad). Nó cũng phát triển một số yêu cầu về thủ tục khiến zina hầu như không thể chứng minh trong thực tế.\nNém đá dường như là phương pháp trừng phạt tư bản tiêu chuẩn ở Israel cổ đại. Việc sử dụng nó được chứng thực trong thời kỳ đầu của Kitô giáo, nhưng các tòa án Do Thái thường tránh ném đá các câu trong thời gian sau đó. Chỉ có một vài trường hợp cô lập về ném đá hợp pháp được ghi lại trong lịch sử tiền hiện đại của thế giới Hồi giáo. Luật hình sự của hầu hết các quốc gia đa số Hồi giáo hiện đại đã bắt nguồn từ các mô hình phương Tây. Trong những thập kỷ gần đây, một số quốc gia đã chèn các hình phạt ném đá và các hình phạt hudud (pl. Of hadd) khác vào bộ luật hình sự của họ dưới ảnh hưởng của các phong trào Hồi giáo. Những luật này có tầm quan trọng đặc biệt đối với những người bảo thủ tôn giáo do nguồn gốc kinh điển của họ, mặc dù trong thực tế, chúng đã đóng một vai trò mang tính biểu tượng và có xu hướng rơi vào tình trạng không sử dụng được.\nTrong thời gian gần đây, ném đá là một hình phạt hợp pháp hoặc theo thông lệ ở Các Tiểu vương quốc Ả Rập Thống nhất, Iraq, Qatar, Mauritania, Ả Rập Saudi, Somalia, Sudan, Yemen, miền bắc Nigeria, Afghanistan, Brunei và các bộ lạc của Pakistan, bao gồm cả phía tây bắc Thung lũng Kurram và vùng tây bắc Khwezai-Baezai. Ở một số quốc gia này, bao gồm Afghanistan và Iraq, nơi ném đá là không hợp pháp, nó đã được các chiến binh, lãnh đạo bộ lạc và các quốc gia khác thực hiện theo cách phi pháp. Ở một số quốc gia khác, bao gồm Nigeria và Pakistan, mặc dù ném đá là một hình thức trừng phạt hợp pháp, nó chưa bao giờ được thực hiện một cách hợp pháp. Việc ném đá bị lên án bởi các tổ chức nhân quyền và các bản án ném đá đã gây ra tranh cãi quốc tế. Trừng phạt ngoại tình bằng ném đá có mức độ hỗ trợ từ công chúng khác nhau trong thế giới Hồi giáo, từ 86% với người Hồi giáo ở Pakistan đến 6% với người Hồi giáo ở Albania và Bosnia.\n\nI. Kinh sách tôn giáo và pháp luật\n1. Do Thái giáo\n\n1.1. Torah\n\nKinh Torah Do Thái (năm cuốn sách đầu tiên của Kinh thánh Do Thái: Genesis, Exodus, Leviticus, Numbers, và Deuteronomy) phục vụ như một tài liệu tham khảo tôn giáo phổ biến cho Do Thái giáo. Ném đá là phương thức thực hiện được đề cập thường xuyên nhất trong Torah. (Kẻ giết người không được nhắc đến như một hành vi phạm tội bị trừng phạt bằng cách ném đá, nhưng có vẻ như một thành viên trong gia đình nạn nhân đã được phép giết kẻ giết người;) Các tội lỗi bị trừng phạt bằng cách ném đá là:\n\nChạm vào Núi Sinai trong khi Thiên Chúa ban cho Môi-se Mười Điều răn, Exodus 19:13\nMột con bò làm chết người nên bị ném đá, Exodus 21:28\nPhá vỡ ngày Sa-bát, Numbers 15:32 cường36\nĐưa \"con đẻ\" \" cho Molech \" Leviticus 20:2 -5\nCó một \" ma quỷ quen thuộc \" (hoặc là một thầy chiêu hồn) hoặc là một \" phù thủy \", Leviticus 20:27\nDụ dỗ người khác vào đa thần giáo, Deuteronomy 13:7\nNguyền rủa Chúa, Leviticus 24:10\nTham gia vào thờ phụng hình tượng, Phục truyền luật lệ ký 17: 2-7; hoặc dụ dỗ người khác làm như vậy, Deuteronomy 13:7\n\"Nổi loạn\" chống lại cha mẹ Deuteronomy 21:18-21.\nKết hôn như một trinh nữ, khi không còn trinh trắng, Deuteronomy 22:13 22,1321\nQuan hệ tình dục giữa một người đàn ông và một người phụ nữ đã đính hôn với một người đàn ông khác trong thị trấn, vì cô ấy không hét lên báo động, Deuteronomy 22:23-24; cả hai người nên bị ném đá đến chết.\nQuan hệ tình dục cưỡng bức giữa một người đàn ông và một người phụ nữ đính hôn với một người đàn ông khác, trên một cánh đồng, nơi không ai có thể nghe thấy tiếng khóc của cô ấy và cứu cô ấy, Deuteronomy 22:25-27; người đàn ông nên bị ném đá.Một trường hợp được ghi chú trong Kinh Thánh, không thuộc bất kỳ loại nào ở trên, là của Achan, bị ném đá đến chết cùng với cừu, gia súc khác và con của anh ta vì đã cướp được những vật có giá trị từ Jericho trong Cuộc chinh phạt Canaan của Joshua.\n\n1.2. Mishna\n\nTalmud mô tả bốn phương thức xử tử: ném đá, đổ chì nóng chảy xuống họng của người bị kết án, chặt đầu và thắt cổ. Mishna đưa ra danh sách những người nên bị ném đá sau đây.\"Áp dụng ném đá cho những kẻ tội lỗi sau đây - אאלו הן הןיהן\n\nmột người đã có quan hệ tình dục với mẹ mình - על האם\nvới vợ của cha mình - עלעל\nvới con dâu của mình - על\nmột người đàn ông với một người đàn ông khác -\nhoặc với gia súc - על\nvà tương tự là trường hợp với một người phụ nữ khỏa thân trước gia súc - האשההאשההמב\nvới một lời báng bổ -\nthờ cúng biểu tượng khác - הע\nngười hy sinh một trong những đứa con của mình cho Molech - הנ מז למ\nmột người để ma quỷ nhập vào mình - בעל\nmột phù thủy - tiếng Tây Ban Nha\nmột người vi phạm ngày Sa-bát - המחללהמחלל\nmột người nguyền rủa cha hoặc mẹ của mình - המקלל\nmột người đã hành hung một cô gái đã hứa hôn - הבא נע סה\nmột người đã thuyết phục người khác tôn thờ các biểu tượng khác - המס\nvà một người đã lừa đảo cả một thị trấn - המד\nmột phù thủy (nam hoặc nữ) - המכשף\nmột đứa con trai bướng bỉnh và nổi loạn - בןVì một mình Thiên Chúa được coi là trọng tài duy nhất trong việc sử dụng hình phạt tử hình, không phải là người trần, sách Sanhedrin đã coi ném đá là cận trên giả thuyết về mức độ nghiêm trọng của hình phạt.\nCâu hỏi: Theo nội dung được cung cấp, trong các tội danh sau đây, tội nào được quy định trong Torah (cụ thể là Deuteronomy) là bị xử tử bằng hình thức ném đá?",
        "right_answer": "D",
        "model_output": "Answer: A",
        "extracted_output": "A",
        "extract_answer_code": "    def extract_answer_letter(self, text: str, num_choices: int) -> str:\n        \"\"\"Extract answer letter from model output based on number of choices\n        \n        Args:\n            text: Model output text\n            num_choices: Number of choices (e.g., 4 for A-D, 5 for A-E, etc.)\n            \n        Returns:\n            Extracted answer letter or empty string if not found\n        \"\"\"\n        # Generate valid letters dynamically based on num_choices\n        max_letter = chr(65 + num_choices - 1)  # 65 is ASCII for 'A'\n        valid_pattern = f\"[A-{max_letter}]\"\n        \n        # Try to find answer in format \"Answer: X\" or \"Đáp án: X\"\n        patterns = [\n            rf\"(?:Answer|Đáp án|answer|đáp án)\\s*[:：]\\s*({valid_pattern})\",\n            rf\"\\b({valid_pattern})\\b(?:\\s*[.)]|\\s*$)\",  # Single letter\n            rf\"^\\s*({valid_pattern})\\s*[.)]\",  # Letter at start with dot or parenthesis\n        ]\n        \n        for pattern in patterns:\n            match = re.search(pattern, text, re.IGNORECASE)\n            if match:\n                return match.group(1).upper()\n        \n        # If no pattern matches, look for last occurrence of valid letters\n        matches = re.findall(rf'\\b({valid_pattern})\\b', text, re.IGNORECASE)\n        if matches:\n            return matches[-1].upper()\n        \n        return \"\"\n"
    }
]